From 6ad65da869df57a93a6f0a53eb5744126ce439ba Mon Sep 17 00:00:00 2001
From: Luiz Augusto von Dentz <luiz.dentz@openbossa.org>
Date: Thu, 9 Oct 2008 19:31:43 -0300
Subject: [PATCH] Fix possible invalid read while attempting to load module-bluetooth-device.

---
 src/modules/bluetooth/module-bluetooth-discover.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/src/modules/bluetooth/module-bluetooth-discover.c b/src/modules/bluetooth/module-bluetooth-discover.c
index ad436f3..36c0a35 100644
--- a/src/modules/bluetooth/module-bluetooth-discover.c
+++ b/src/modules/bluetooth/module-bluetooth-discover.c
@@ -346,7 +346,7 @@ static void load_module_for_device(struct userdata *u, struct device *d, const c
     pa_m = pa_module_load(u->module->core, "module-bluetooth-device", args);
     pa_xfree(args);
 
-    if (!m) {
+    if (!pa_m) {
         pa_log_debug("Failed to load module for device %s", d->object_path);
         return;
     }
-- 
1.6.0.3

